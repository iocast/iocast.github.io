<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>iocast</title><link href="/" rel="alternate"></link><link href="/feeds/desktop-application.atom.xml" rel="self"></link><id>/</id><updated>2014-04-30T00:00:00+02:00</updated><entry><title>node-webkit desktop application and 3rd party libraries</title><link href="/blog/2014/04/30-node-webkit-desktop-application.html" rel="alternate"></link><updated>2014-04-30T00:00:00+02:00</updated><author><name>iocast</name></author><id>tag:,2014-04-30:blog/2014/04/30-node-webkit-desktop-application.html</id><summary type="html">&lt;p&gt;&lt;strong&gt;To the readers&lt;/strong&gt;: I anticipate, that you know what nodejs, node-webkit is and their concept.&lt;/p&gt;
&lt;h2&gt;Preparation&lt;/h2&gt;
&lt;p&gt;Sadly, before we can start to code, we need to setup our environment. First download the desired version of the node-webkit from &lt;a href="https://github.com/rogerwang/node-webkit" title="node-webkit is an app runtime based on Chromium and node.js"&gt;rogerwangs' GitHub repository&lt;/a&gt; and extract the archive file to the place you want to have it. Then do the same for the &lt;a href="http://nodejs.org" title="Node.js is a platform built on Chrome's JavaScript runtime for easily building fast, scalable network applications."&gt;nodejs&lt;/a&gt;. If you &lt;strong&gt;do not&lt;/strong&gt; want to install nodejs, consider downloading the &lt;strong&gt;binaries&lt;/strong&gt; and NOT the installer.&lt;/p&gt;
&lt;p&gt;Now we are almost ready to code. Lets have a short look at the folder structure.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;../&lt;/span&gt;
&lt;span class="cp"&gt; |- project/&lt;/span&gt;
&lt;span class="cp"&gt;      |- nodejs/&lt;/span&gt;
&lt;span class="cp"&gt;      |    |- bin/&lt;/span&gt;
&lt;span class="cp"&gt;      |    |- ...&lt;/span&gt;
&lt;span class="cp"&gt;      |- node-webkit/&lt;/span&gt;
&lt;span class="cp"&gt;           |- node-webkit.app&lt;/span&gt;
&lt;span class="cp"&gt;           |- ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now we need to create the necessary subdirectories for our project. So create the following folders&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mkdir -p project/node-webkit/node_modules project/node-webkit/app
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;First steps&lt;/h2&gt;
&lt;h3&gt;Configuration&lt;/h3&gt;
&lt;h3&gt;Creating your own modules&lt;/h3&gt;
&lt;h3&gt;Using a template engine&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/paularmstrong/swig" title="Swig is an awesome, Django/Jinja-like template engine for node.js."&gt;swig&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;project/node-webkit
project/nodejs/bin/npm install swig --save
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;3rd party libraries&lt;/h2&gt;
&lt;p&gt;Third party libraries needs normally a rebuild for your target. &lt;a href="https://github.com/rogerwang/nw-gyp" title="Native addon build tool for node-webkit"&gt;nw-gyp&lt;/a&gt; is needed to do a rebuild of a prebuilt library to your installed target system. Hence we need to install &lt;a href="https://github.com/rogerwang/nw-gyp" title="Native addon build tool for node-webkit"&gt;nw-gyp&lt;/a&gt; globally.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;project/nodejs/bin/npm install -g nw-gyp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now we are ready to install the desired 3rd party libraries. First you need to install the library&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;project/node-webkit
project/nodejs/bin/npm install sqlite3@2.2.0 --save
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and then rebuild the library for your target system&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;project/node-webkit/node_modules/sqlite3
project/nodejs/bin/node project/nodejs/lib/node_modules/nw-gyp/bin/nw-gyp.js rebuild --target&lt;span class="o"&gt;=&lt;/span&gt;0.8.5
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;where target is the version number of the node-webkit you have downloaded.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;project/nodejs/bin/npm cache clean
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;project/nodejs/bin/npm install -g bower
project/nodejs/bin/node project/nodejs/lib/node_modules/bower/bin/bower init
bower install --save Polymer/polymer
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Distribute&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;Script / Config&lt;/th&gt;
&lt;th align="left"&gt;Purpose&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;/usr/libexec/qgis/qgis_mapserv.fcgi&lt;/td&gt;
&lt;td align="left"&gt;main fast cgi script (OGC capabilities)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;/etc/httpd/conf.d/qgis-mapserver.conf&lt;/td&gt;
&lt;td align="left"&gt;qgis mapserver httpd configuration file&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</summary><category term="development"></category><category term="javascript"></category><category term="nodejs"></category><category term="node-webkit"></category><category term="node-sqlite3"></category><category term="sqlite"></category></entry></feed>