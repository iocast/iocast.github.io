<!DOCTYPE html>
<html>
    <head>
    <!-- Title -->
    
    <title>
        Ubuntu 12.04, PGSQL 9.3, PostGIS 2.1 and PL/R against libgdal1h from scratch | iocast&#39;s blog
    </title>
    
    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">
    
    <!-- Meta & INfo -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="iocast">
    <meta name="description" content="null">
    <meta name="keywords" content="null">
    
    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="iocast&#39;s blog">
    
    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://iocast.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Ubuntu 12.04, PGSQL 9.3, PostGIS 2.1 and PL/R against libgdal1h from scratch | iocast&#39;s blog">
    <meta property="og:description" content="null">
    
     <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">
        
        
            <script src="/js/ie-blocker.en.js"></script>
        
    <![endif]-->
    
    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
	body, html{
		font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
	}
	
    a{
        color: #00838F
    }
    
    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #0097A7 !important
    }
    
	/* Sidebar User Drop Down Menu Text Color */
	#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus{
        color: #0097A7 !important
    }
    
    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a{
        color: #0097A7 !important
    }
    
    .toTop{
        background: #757575 !important
    }
		
	.material-layout .material-post>.material-nav,
	.material-layout .material-index>.material-nav,
	.material-nav a{
		color: #757575;
	}
		
	#scheme-Paradox .MD-burger-layer {
		background-color: #757575;
	}

	#scheme-Paradox #post-toc-trigger-btn{
		color: #757575;
	}
	
	.post-toc a:hover{
		color: #00838F;
		text-decoration: underline;
	}
</style>


<!-- Theme Background Related-->

    <style>
        body{
            background-color: #F5F5F5
        }
		
		/* blog_info bottom background */
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
    </style>




<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>

	<script src="/js/jquery.min.js"></script>
	
	<!-- UC Browser Compatible-->
	<script>
		var agent = navigator.userAgent.toLowerCase();
		if(agent.indexOf('ucbrowser')>0) {
			document.write('<link rel="stylesheet" href="/css/uc.css">');
		   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
		}
	</script>
    
    <!-- Custom Head -->
    
</head>
	
	

    <body id="scheme-Isolation">

		
        <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
				
			
				<!-- Isolation Header -->
				<header class="header">
	<div class="header-wrapper">
		
		<!-- Header Copyright -->
		<div class="header-copyright">
			<div class="header-site">
				©&nbsp;<script type="text/javascript">var fd = new Date();document.write(fd.getFullYear());</script>&nbsp;iocast's blog
			</div>
			<!-- 
			I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
			It will not impact the appearance and can give developers a lot of support :)

			很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
			它不会影响美观并可以给开发者很大的支持。 :) 
			-->
			<div>
				Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a>
				<br>
				Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a>
			</div>
			
		</div>

		<!-- Header Title -->
		<span class="header-title header-item">
			<a href="/" title="iocast&#39;s blog">
				iocast&#39;s blog
			</a>
		</span>

		<p class="header-slogan header-item">
			Hi, nice to meet you
		</p>
		
		<!-- Header Nav -->
		<nav class="header-nav header-item">

			<span class="header-nav-item">
				<a href="/" title="Home">
					<span>Home</span>
				</a>
			</span>
			
			<!-- Independent Pages -->
            
				<span class="header-nav-item">
					<a href="/about" title="about">
						<span>about</span>
					</a>
				</span>
            

		</nav>

		<!-- Header SNS -->
		<div class="header-item header-sns_list">
    <!-- Twitter -->
    
    
    
    <!-- Facebook -->
    
    
    
    <!-- Google + -->
    
    
    
    <!-- Weibo -->
    
    
    
    <!-- Instagram -->
    
    
    
    <!-- Tumblr -->
    
    
    
    <!-- Github -->
    
    
</div>


	</div>
</header>
			
			
            <!-- Main Container -->
            <main class="material-layout__content" id="main">
				
                <!-- Top Anchor -->
                <div id="top"></div>
				
				
				
                

<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">
		
        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
	

	<!-- Isolation Post Header -->
	<!-- Post thumbnail -->
	
		<!-- Post Header Info -->
		<div class="post-header_info without-thumbnail">
			<!-- Author Avatar & Name -->
			<img src="/img/avatar.png" class="avatar-img" width="44px" height="44px" alt="iocast's avatar">
			<span class="name-span">iocast</span>
		</div>
	
		<!-- Null Thumbnail -->
		<div class="post_thumbnail-null">
	
	</div>

				
				

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
	
	
	
		<div class="post-content_wrapper">
			<p class="post-title">
				Ubuntu 12.04, PGSQL 9.3, PostGIS 2.1 and PL/R against libgdal1h from scratch
			</p>
			<h2 id="Removing-preinstalled-packages"><a href="#Removing-preinstalled-packages" class="headerlink" title="Removing preinstalled packages"></a>Removing preinstalled packages</h2><p>First we need to check which PostgreSQL, PostGIS and GDAL versions are installed. To do so check your Debian package management system (dpkg).</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">dpkg <span class="_">-l</span> | grep <span class="string">'postgres\|gdal'</span></div></pre></td></tr></table></figure>
<p>You should get a list like the following one:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">ii  libgdal-dev                        1.10.0-1~precise1                 Geospatial Data Abstraction Library - Development files</div><div class="line">ii  libgdal1-dev                       1.10.0-1~precise1                 Geospatial Data Abstraction Library - Development files</div><div class="line">ii  libgdal1h                          1.10.0-1~precise1                 Geospatial Data Abstraction Library</div><div class="line">ii  postgresql-9.1                     9.1.10-0ubuntu12.04               object-relational SQL database, version 9.1 server</div><div class="line">ii  postgresql-9.1-postgis-2.0         2.0.3-2~precise4                  Geographic objects support <span class="keyword">for</span> PostgreSQL 9.1</div><div class="line">ii  postgresql-9.1-postgis-2.0-scripts 2.0.3-2~precise4                  Geographic objects support <span class="keyword">for</span> PostgreSQL 9.1 -- scripts</div><div class="line">ii  postgresql-client-9.1              9.1.10-0ubuntu12.04               front-end programs <span class="keyword">for</span> PostgreSQL 9.1</div><div class="line">ii  postgresql-client-common           129ubuntu1                        manager <span class="keyword">for</span> multiple PostgreSQL client versions</div><div class="line">ii  postgresql-common                  129ubuntu1                        PostgreSQL database-cluster manager</div><div class="line">ii  postgresql-contrib-9.1             9.1.10-0ubuntu12.04               additional facilities <span class="keyword">for</span> PostgreSQL</div></pre></td></tr></table></figure>
<p>If you want, you could remove these packages as follow:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-get purge libgdal-dev libgdal1-dev libgdal1h postgresql-9.1 postgresql-9.1-postgis-2.0 postgresql-9.1-postgis-2.0-scripts postgresql-client-9.1 postgresql-client-common postgresql-common</div><div class="line">apt-get autoremove</div><div class="line">apt-get autoclean</div></pre></td></tr></table></figure>
<h2 id="Installing-PostgreSQL-9-3"><a href="#Installing-PostgreSQL-9-3" class="headerlink" title="Installing PostgreSQL 9.3"></a>Installing PostgreSQL 9.3</h2><p>First you need to find out your release code name:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">lsb_release -c</div></pre></td></tr></table></figure>
<p>which get you something like that <code>Codename:    precise</code></p>
<p>Create a new file <code>codename-pgdg.list</code> in <code>/etc/apt/sources.list.d</code> according to the <a href="https://wiki.postgresql.org/wiki/Apt" title="Apt - PostgreSQL wiki" target="_blank" rel="external">PostgreSQL wiki page</a>.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">vi /etc/apt/sources.list.d/precise-pgdg.list</div></pre></td></tr></table></figure>
<p>and add the following line</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main</div></pre></td></tr></table></figure>
<p>Now we need to import the repository key from</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">wget --quiet -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | sudo apt-key add -</div></pre></td></tr></table></figure>
<p>Now we can a update the repository and install the required packages from the PostgreSQL repository.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-get update</div><div class="line">apt-get install postgresql-9.3 postgresql-contrib-9.3 postgresql-server-dev-9.3</div></pre></td></tr></table></figure>
<h2 id="Compiling-PostGIS-2-1-against-libgdal-gt-1-10-0"><a href="#Compiling-PostGIS-2-1-against-libgdal-gt-1-10-0" class="headerlink" title="Compiling PostGIS 2.1 against libgdal &gt;= 1.10.0"></a>Compiling PostGIS 2.1 against libgdal &gt;= 1.10.0</h2><p>To install PostGIS 2.1 it is important that <code>postgresql-server-dev-x.x</code> is installed, because we need to compile PostGIS against these source files. We are going the install the precompiled <code>libgdal</code> 1.10.0 version from <strong>ubuntugis</strong>.</p>
<p>Install <code>python-software-properties</code> and add the apt sources (repositories):</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-get install python-software-properties</div><div class="line">add-apt-repository ppa:ubuntugis/ubuntugis-unstable</div><div class="line">apt-get update</div></pre></td></tr></table></figure>
<p>Now install the new GDAL library called <code>libgdal1h</code> and its’ development package</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-get install libgdal1h</div><div class="line">apt-cache showpkg libgdal-dev*</div></pre></td></tr></table></figure>
<p>which gets you something like that:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">...</div><div class="line">Provides:</div><div class="line">1.10.0-1~precise1 -</div><div class="line">1.9.0-3.1~pgdg12.4+1 -</div><div class="line">...</div></pre></td></tr></table></figure>
<p>You can install a version using the <figure class="highlight plain"><figcaption><span>flag</span></figcaption><table><tr><td class="code"><pre><div class="line"></div><div class="line">```bash</div><div class="line">apt-get install -f libgdal-dev=1.10.0-1~precise1</div></pre></td></tr></table></figure></p>
<p>Before installing the PostGIS from source we install the required dependencies.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-get install make gcc checkinstall libxml2-dev libproj-dev libgeos-dev</div></pre></td></tr></table></figure>
<p>Download the latest PostGIS source and compile it</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">wget http://download.osgeo.org/postgis/<span class="built_in">source</span>/postgis-2.1.0.tar.gz</div><div class="line">tar xzvf postgis-2.1.0.tar.gz</div><div class="line"><span class="built_in">cd</span> postgis-2.1.0</div><div class="line">./configure</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"> PostGIS is now configured <span class="keyword">for</span> x86_64-unknown-linux-gnu</div><div class="line"></div><div class="line">-------------- Compiler Info -------------</div><div class="line"> C compiler:           gcc -g -O2</div><div class="line"> C++ compiler:         g++ -g -O2</div><div class="line"> SQL preprocessor:     /usr/bin/cpp -traditional-cpp -P</div><div class="line"></div><div class="line">-------------- Dependencies --------------</div><div class="line"> GEOS config:          /usr/bin/geos-config</div><div class="line"> GEOS version:         3.3.8</div><div class="line"> GDAL config:          /usr/bin/gdal-config</div><div class="line"> GDAL version:         1.10.0</div><div class="line"> PostgreSQL config:    /usr/bin/pg_config</div><div class="line"> PostgreSQL version:   PostgreSQL 9.3.1</div><div class="line"> PROJ4 version:        48</div><div class="line"> Libxml2 config:       /usr/bin/xml2-config</div><div class="line"> Libxml2 version:      2.8.0</div><div class="line"> JSON-C support:       no</div><div class="line"> PostGIS debug level:  0</div><div class="line"> Perl:                 /usr/bin/perl</div><div class="line"></div><div class="line">--------------- Extensions ---------------</div><div class="line"> PostGIS Raster:       enabled</div><div class="line"> PostGIS Topology:     enabled</div><div class="line"> SFCGAL support:       disabled</div><div class="line"></div><div class="line">-------- Documentation Generation --------</div><div class="line"> xsltproc:             </div><div class="line"> xsl style sheets:     </div><div class="line"> dblatex:              </div><div class="line"> convert:              </div><div class="line"> mathml2.dtd:          http://www.w3.org/Math/DTD/mathml2/mathml2.dtd</div></pre></td></tr></table></figure>
<p>use <code>checkinstall</code>, which runs <code>make install</code> and registers the package in <code>dpkg</code>.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">make</div><div class="line">checkinstall</div></pre></td></tr></table></figure>
<h2 id="R-3-0-2-and-PL-R-for-PostgreSQL"><a href="#R-3-0-2-and-PL-R-for-PostgreSQL" class="headerlink" title="R 3.0.2 and PL/R for PostgreSQL"></a>R 3.0.2 and PL/R for PostgreSQL</h2><p>Before we can install PL/R extension for PostgreSQL 9.3 we need to install R 3.0.2 as describe on the <a href="http://cran.r-project.org" title="The Comprehensive R Archive Network" target="_blank" rel="external">R-Project</a> site. First edit the</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">vi /etc/apt/sources.list</div></pre></td></tr></table></figure>
<p>and add the following line and do a update</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">deb http://cran.r-project.org/bin/linux/ubuntu precise/</div></pre></td></tr></table></figure>
<p>as well as the key</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9</div><div class="line">apt-get update</div></pre></td></tr></table></figure>
<p>The search for the 3.0.2 R package version and install it.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-cache showpkg r-base</div><div class="line">apt-get install <span class="_">-f</span> r-base=3.0.2-1precise0</div></pre></td></tr></table></figure>
<p>Lastly we can install the PL/R extension for PostgreSQL from the PostgreSQL apt repository</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">apt-get install postgresql-9.3-plr</div></pre></td></tr></table></figure>
<p>So … we are ready … have fun.</p>

		</div>
	
	
</div>
				
				
					<!-- Paradox Post Info -->
					
				

                <!-- Post Comments -->
                


    <!-- 使用 DISQUS -->
	<div id="disqus-comment">
		<div id="disqus_thread"></div>
<script>
	var disqus_config = function () {
		this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
		this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
	};

	(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = '//iocast-blog.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();
</script>
	</div>
	<style>
		#disqus-comment{
			background-color:#eee;
			padding:2pc;
		}
	</style>

            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <!-- Prev Nav -->
    
        <a href="/en/2013/11/30/server-management/linux-join-ad/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Newer
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/en/2013/10/16/web-application/centos-python-modwsgi/" id="post_nav-older" class="next-content">
            Older
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
        </div>
    </div>

				
				
				
				
				
				<!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
	
	
    
</footer>
                
				<!-- Import File -->
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>










    <!-- 使用 DISQUS js 代码 -->
	<script id="dsq-count-scr" src="//iocast-blog.disqus.com/count.js" async></script>


<!-- Swiftye -->


<!-- Local Search-->

	<script>
	var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        success: function( xmlResponse ) {
            // get the contents from search data
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length <= 0) {
                    return;
                }
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        str += "<li><a href='"+ data_url +"' class='search-result-title' target='_blank'>"+ data_title;
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out characters
                            var start = first_occur - 6;
                            var end = first_occur + 6;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 10;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substr(start, end); 
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<em class=\"search-keyword\">"+keyword+"</em>");
                            })
                            str += "<p class=\"search-result\">" + match_content +"...</p>" +"</a>";
                        }
                    }
                })
                $resultContent.innerHTML = str;
            })
        }
    })
}
</script>

	<script>
		var search_path = "search.xml";
		if (search_path.length == 0) {
		search_path = "search.xml";
		}
		var path = "/" + search_path;
		searchFunc(path, 'search', 'local-search-result');
        
        
	</script>


<!-- Window Load-->
<script>
    // Post_Toc parent position fixed
    $(window).load(function() {
        $(".post-toc-wrap").parent(".mdl-menu__container").css("position", "fixed");
    });
</script>
            </main>
        </div>
		
    </body>
		
	
</html>
