<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="blog, cheatsheets, best practices, notes, and more"><meta name=author content=iocast><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1"><title>Rust -- think twice code once!</title><script src=https://iocast.github.io/libs/smoothscroll.min.js></script><link rel=stylesheet type=text/css href=https://iocast.github.io/semantic/semantic.min.css><script src=https://iocast.github.io/libs/jquery-3.3.1.min.js></script><script src=https://iocast.github.io/semantic/semantic.min.js></script><script src=https://iocast.github.io/libs/masonry.pkgd.min.js></script><script>$(document).ready(function(){$('.masthead').visibility({once:false,onBottomPassed:function(){$('.fixed.menu').transition('fade in');},onBottomPassedReverse:function(){$('.fixed.menu').transition('fade out');}});$('.ui.sidebar').sidebar('attach events','.toc.item');});</script><link rel=stylesheet type=text/css href=https://iocast.github.io/css/syntax.css><link rel=stylesheet type=text/css href=https://iocast.github.io/css/main.css></head><body><div class="ui large top fixed hidden menu"><div class="ui container"><a class=item href=https://iocast.github.io/>Home</a>
<a class=item href=https://iocast.github.io/post/>Archives</a>
<a class="active item" href=https://iocast.github.io/cheatsheet/>Cheatsheets</a></div></div><div class="ui vertical inverted sidebar menu"><a class=item href=https://iocast.github.io/>Home</a>
<a class=item href=https://iocast.github.io/post/>Archives</a>
<a class="active item" href=https://iocast.github.io/cheatsheet/>Cheatsheets</a></div><div class=pusher><div class="ui inverted vertical masthead center aligned segment"><div class="ui container"><div class="ui large secondary inverted pointing menu"><a class="toc item"><i class="sidebar icon"></i></a><a class=item href=https://iocast.github.io/>Home</a>
<a class=item href=https://iocast.github.io/post/>Archives</a>
<a class="active item" href=https://iocast.github.io/cheatsheet/>Cheatsheets</a></div></div><div class="ui text container"><h1 class="ui inverted header">RUST</h1><div class=abstract>Small collection of commands and scripts</div></div></div><div class="ui vertical stripe segment"><div class="ui middle aligned stackable grid container"><div class=row><div class="sixteen  wide column"><div class="main ui container sticky--container"><div class="ui dividing right rail"><div class="ui sticky"><h4 class="ui header">Rust</h4><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#rustup-setup-info-etc>Rustup (Setup / Info / etc.)</a><ul><li><a href=#update>Update</a></li><li><a href=#current-installation>Current installation</a></li><li><a href=#toolchain>Toolchain</a></li></ul></li><li><a href=#cargo>Cargo</a><ul><li><a href=#new-project>New project</a></li><li><a href=#others>Others</a></li><li><a href=#dependencies>Dependencies</a></li></ul></li><li><a href=#building>Building</a></li><li><a href=#rust-and-wsl-with-cargo>Rust and WSL with Cargo</a><ul><li><a href=#cross-compile-from-ubuntu-to-windows-x86-64>cross-compile from Ubuntu to Windows x86_64</a></li></ul></li><li><a href=#file-size-optimizatin>File size optimizatin</a></li></ul></nav></div></div><div><h1 class="ui header" id=overview>Overview</h1></table><table class="ui celled table"><thead><tr><th align=left>Command</th><th align=left>Description</th></tr></thead><tbody><tr><td align=left><code>rustup self uninstall</code></td><td align=left>uninstall</td></tr><tr><td align=left><code>rustup update</code></td><td align=left>updates rust</td></tr><tr><td align=left><code>rustup show</code></td><td align=left>shows the current innstallation incl. toolchain</td></tr><tr><td align=left><code>cargo new test_app --bin</code></td><td align=left>creates a new application / binary project</td></tr><tr><td align=left><code>cargo new test_lib --lib</code></td><td align=left>creates a new library project</td></tr></tbody></table><h1 class="ui header" id=rustup-setup-info-etc>Rustup (Setup / Info / etc.)</h1><p>Uninstall rust on your system.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustup self uninstall

<span class=c1># Windows</span>
C:<span class=se>\U</span>sers<span class=se>\&lt;</span>name&gt;<span class=se>\.</span>cargo
C:<span class=se>\U</span>sers<span class=se>\&lt;</span>name&gt;<span class=se>\.</span>rustup

<span class=c1># Linux</span>
~/.cargo
~/.rustup</code></pre></div><h2 class="ui header" id=update>Update</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustup udpate</code></pre></div><h2 class="ui header" id=current-installation>Current installation</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustup show</code></pre></div><h2 class="ui header" id=toolchain>Toolchain</h2><p>Install the nightly toolchain as follow.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustup toolchain install nightly</code></pre></div><p>Now Rust nightly is installed, but not activated. To test it out you can run a command from the nightly toolchain like</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustup run nightly rustc --version</code></pre></div><p>But more likely you want to use it for a while. To switch to nightly globally, change the default with rustup default nightly.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustup default nightly</code></pre></div><h1 class="ui header" id=cargo>Cargo</h1><blockquote><p>Cargo is the Rust package manager. Cargo downloads your Rust package’s dependencies, compiles your packages, makes distributable packages, and uploads them to crates.io, the Rust community’s package registry. You can contribute to this book on GitHub.</p></blockquote><h2 class="ui header" id=new-project>New project</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo new &lt;project-name&gt; <span class=o>[</span>--bin<span class=p>|</span>--lib<span class=o>]</span></code></pre></div><dl><dt><code>--bin</code></dt><dd>binary programm / project</dd><dt><code>--lib</code></dt><dd>library project</dd></dl><p>This also initializes a new <code>git</code> repository by default. If you don&rsquo;t want it to do that, pass <code>--vcs none</code>.</p><h2 class="ui header" id=others>Others</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo check</code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo test</code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo clean</code></pre></div><h2 class="ui header" id=dependencies>Dependencies</h2><p>install creates from creates.io</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo install &lt;name&gt;</code></pre></div><h1 class="ui header" id=building>Building</h1><p>To build / compile using <code>rustc</code> you can do it as follow.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustc ../*.rs</code></pre></div><p>With cargo, which uses <code>Cargo.toml</code> the command is as follow.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo build <span class=o>[</span>--release<span class=o>]</span></code></pre></div><p>target tripple</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustc --print target-list <span class=p>|</span> pr -tw100 --columns <span class=m>3</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo build --target x86_64-pc-windows-msvc
<span class=c1># msvc for windos. useses Visual C++ compiler</span></code></pre></div><h1 class="ui header" id=rust-and-wsl-with-cargo>Rust and WSL with Cargo</h1><h2 class="ui header" id=cross-compile-from-ubuntu-to-windows-x86-64>cross-compile from Ubuntu to Windows x86_64</h2><p>add a new target to the toolchain</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ rustup target add x86_64-pc-windows-gnu</code></pre></div><p>install mingw-w64</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo apt install mingw-w64</code></pre></div><p>To tell Rust which linker to use, add the following to ~/.cargo/config:</p><p>[target.x86_64-pc-windows-gnu]
linker = &ldquo;/usr/bin/x86_64-w64-mingw32-gcc&rdquo;</p><p>or <a href=https://doc.rust-lang.org/cargo/reference/config.html#hierarchical-structure>https://doc.rust-lang.org/cargo/reference/config.html#hierarchical-structure</a></p><p>cross-compile</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ cargo build --target x86_64-pc-windows-gnu --release <span class=o>&amp;&amp;</span> strip target/x86_64-pc-windows-gnu/release/chrome-bookmark-sync.exe</code></pre></div><p>The rustup toolchain proxies can be instructed directly to use a specific toolchain, a convenience for developers who often test different toolchains. If the first argument to cargo, rustc or other tools in the toolchain begins with +, it will be interpreted as a rustup toolchain name, and that toolchain will be preferred, as in</p><p>cargo +beta test</p><h1 class="ui header" id=file-size-optimizatin>File size optimizatin</h1><p><a href=https://lifthrasiir.github.io/rustlog/why-is-a-rust-executable-large.html>https://lifthrasiir.github.io/rustlog/why-is-a-rust-executable-large.html</a></p></div></div><script>$('.ui.sticky').sticky({context:'.sticky--container',offset:56});</script></div></div></div></div></div><script src=https://iocast.github.io/main.js></script></body></html>